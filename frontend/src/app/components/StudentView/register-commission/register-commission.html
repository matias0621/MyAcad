<section class="exam-inscription" aria-labelledby="final-inscriptions-title">

    @for (inscription of inscriptionList; track $index) {

    <section class="exam-header">
        <div class="exam-header-text">
            <h2 id="final-inscriptions-title" class="exam-title">
                Comisión {{ inscription.commission.number }}
            </h2>
        </div>

        @if (!isStudentInCommission(inscription.commission)) {
        <button class="exam-action exam-action--info">
            Registrarse a toda la comisión
        </button>
        }
    </section>

    <div class="exam-table-wrapper">
        <table class="exam-table">
            <thead>
                <tr>
                    <th scope="col">Carrera</th>
                    <th scope="col">Materia</th>
                    <th scope="col" class="exam-table-actions-header">
                        Acciones
                    </th>
                </tr>
            </thead>

            <tbody>
                @for (subject of inscription.commission.subjects; track $index) {

                <tr>
                    <td data-label="Carrera">
                        {{ inscription.commission.program }}
                    </td>

                    <td data-label="Materia">
                        {{ subject.name }}
                    </td>

                    <td class="exam-actions" data-label="Acciones">

                        <!-- 1️⃣ NO está en la materia -->
                        @if (
                        !isStudentInSubjectAndCommission(subject, inscription.commission)
                        && !isStudentInSubjectOtherCommission(subject, inscription.commission)
                        ) {
                        <button type="button" class="exam-action exam-action--info"
                            (click)="registerByStudent(subject.id, inscription.commission.id)">
                            Registrarse
                        </button>
                        }

                        <!-- 2️⃣ Está en materia Y comisión -->
                        @else if (
                        isStudentInSubjectAndCommission(subject, inscription.commission)
                        ) {
                        <button (click)="unregister(subject.id, inscription.commission.id)" type="button" class="exam-action delete-action--info">
                            Darse de baja
                        </button>
                        }

                        <!-- 3️⃣ Está en la materia pero en otra comisión -->
                        @else {
                        <span class="exam-warning-text">
                            Date de baja de esta materia para anotarte acá
                        </span>
                        }

                    </td>
                </tr>

                }
            </tbody>
        </table>
    </div>

    }

</section>