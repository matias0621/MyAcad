<section class="crud-management d-flex justify-content-center">


    <div class="crud-management-container">
        <h1 style="text-align: center;">{{programName}}</h1>

        <div id="subjects">
            <button class="add-crud-btn" data-bs-toggle="modal" data-bs-target="#modal-subjects">Estado de
                materias</button>
        </div>

        <table class="crud-table">
            <thead>
                <tr class="text-center">
                    <th scope="col">Comisión</th>
                    <th scope="col">Materias</th>
                </tr>
            </thead>
            <tbody class="crud-table-body">
                <!-- USERS -->
                @for (com of commissionList; track $index) {
                <tr class="crud-table-item">
                    <td>{{com.number}}</td>
                    <td>
                        @for (s of com.subjects; track $index; let last = $last) {
                        {{ s.name }}{{ !last ? ', ' : '' }}
                        }
                    </td>

                </tr>
                }@empty {
                <tr>
                    <td colspan="6" class="text-center">
                        <p style="color: red;"> Aun no hay ninguna comisión cargado.</p>
                    </td>
                </tr>
                }
            </tbody>
            <tfoot>
            </tfoot>
        </table>

        <h1 style="text-align: center;">Examenes</h1>
        <!-- TABLA -->
        <table class="crud-table">
            <thead>
                <tr class="text-center">
                    <th scope="col">Id</th>
                    <th scope="col">Nota</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Materia</th>
                    <th scope="col">Tipo de examen</th>
                </tr>
            </thead>
            <tbody class="crud-table-body">
                <!-- USERS -->
                @for (exams of listExams; track $index) {
                <tr class="crud-table-item">
                    <td>{{exams.id}}</td>
                    <td>{{exams.score}}</td>
                    <td>{{exams.student.name}}</td>
                    <td>{{exams.subject.name}}</td>

                    @if(exams.examType === "EXAM"){
                    <td>Parcial</td>
                    }
                    @else if (exams.examType === "FINAL_EXAM") {
                    <td>Final</td>
                    }
                    @else if (exams.examType === "MAKEUP_EXAM") {
                    <td>Recuperatorio</td>
                    }
                </tr>
                }@empty {
                <tr>
                    <td colspan="6" class="text-center">
                        <p style="color: red;"> Aun no hay ninguna comisión cargado.</p>
                    </td>
                </tr>
                }
            </tbody>
            <tfoot>
            </tfoot>
        </table>
    </div>
</section>

<!-- Modal agregar usuario -->
<div class="modal fade crud-modal" id="modal-subjects" tabindex="-1" aria-labelledby="modal-subjects-label"
    style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered crud-modal__dialog">
        <div class="modal-content crud-modal__content">
            <div class="modal-header crud-modal__header">
                <h1 class="modal-title fs-5 titles crud-modal__title">Estado de materias</h1>
                <button type="button" class="btn-close crud-modal__close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body crud-modal__body">
                <div class="detail-container">
                    @for (subjects of listSubjects; track $index) {
                    <div class="detail-item">
                        <strong>Materia:</strong>
                        <span>{{subjects.subjects.name}}</span>
                    </div>
                    <div class="detail-item">
                        <strong>Estado:</strong>
                        <span>{{subjects.academicStatus}}</span>
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>