<section class="register-wrapper" aria-labelledby="register-title">
    <header class="register-header">
        <div>
            <p class="register-program">Programa seleccionado</p>
            <h1 id="register-title">{{ programName }}</h1>
        </div>
        <p class="register-note">Elegí una comisión y luego inscribite a la materia que prefieras.</p>
    </header>

    @if (listCommission.length === 0) {
    <p class="register-empty">Por el momento no hay comisiones disponibles para este programa.</p>
    } @else {
    <div class="commission-grid">
        @for (com of listCommission; track com.id) {
        <article class="commission-card">
            <header class="commission-header">
                <div class="commission-heading">
                    <h2>Comisión {{ com.number }}</h2>
                    <span class="commission-program">{{ com.program }}</span>
                </div>
                <div class="commission-meta">
                    <span class="commission-capacity">Cupo: {{ com.capacity }}</span>
                    <span class="commission-count">Materias: {{ com.subjects.length }}</span>
                </div>
            </header>

            @if (com.subjects && com.subjects.length > 0) {
            <ul class="subjects-list">
                @for (subject of com.subjects; track subject.id) {
                <li class="subject-item">
                    <div class="subject-info">
                        <h3 class="subject-name">{{ subject.name }}</h3>
                    </div>
                    <button type="button" class="subject-action" (click)="registerStudent(com.id, subject.id)">
                        Inscribirme
                    </button>
                </li>
                }
            </ul>
            } @else {
            <p class="subjects-empty">Esta comisión todavía no tiene materias asignadas.</p>
            }
        </article>
        }
    </div>
    }
</section>