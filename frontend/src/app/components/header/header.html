<header>
  <nav [class.menu-open]="isMenuOpen">

    <!-- Si no hay rol (no logueado) -->
    @if (!service.getRole()) {
      <a routerLink="">
        <img src="/Media/Logo.png" alt="Logo UTN" id="logo">
      </a>
    }
    @else {

      <!-- Botón hamburguesa -->
      @if (service.getRole() === 'ROLE_MANAGER') {
        <button
          class="hamburger"
          type="button"
          aria-label="Abrir menú"
          [attr.aria-expanded]="isMenuOpen"
          (click)="toggleMenu()">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </button>
      }

      <!-- Logo -->
      <a routerLink="">
        <img src="/Media/Logo.png" alt="Logo UTN" id="logo">
      </a>

      <!-- Menu principal segun rol-->
      <div class="left-navs">
        @for (item of menu(); track item.id) {

          @if (!item.subItems || item.subItems.length === 0) {
            <a [routerLink]="item.route">{{ item.label }}</a>
          }
          @else {
            <!-- Dropdown -->
            <div class="dropdown">
              <button
                class="dropdown-button dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false">
                {{ item.label }}
              </button>
              <ul class="dropdown-menu">
                @for (child of item.subItems; track child.id) {
                  <li>
                    <a
                      class="dropdown-item"
                      [routerLink]="child.route">
                      {{ child.label }}
                    </a>
                  </li>
                }
              </ul>
            </div>
          }

        }
      </div>

      <!-- Perfil igual para todos los roles -->
      <div class="dropdown" id="dropdown-profile">
        <button
          class="dropdown-button dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false">
          <i class="fa-solid fa-circle-user"></i>
        </button>
        <ul class="dropdown-menu">
          <li>
            <button
              type="button"
              class="dropdown-item"
              (click)="openChangePassword(); $event.stopPropagation();">
              Cambiar contraseña
            </button>
          </li>
          <li>
            <a (click)="logout()" class="logout-link">
              <span>Cerrar sesión</span>
            </a>
          </li>
        </ul>
      </div>

    }
  </nav>

  <!-- Overlay para cerrar el menu en mobile -->
  <div
    class="mobile-overlay"
    [class.show]="isMenuOpen"
    (click)="closeMenu()">
  </div>
</header>
